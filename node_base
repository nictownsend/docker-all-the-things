#!/bin/bash
EXPOSE_PORTS=()

grep -q "run" <<< "${@}" && EXPOSE_PORTS=(-p 3000:3000)

docker run -i "${EXPOSE_PORTS[@]}" -v users:/Users -v node_modules:/usr/npm_global -v "${HOME}"/.npmrc:/root/.npmrc -v "${HOME}"/.git:/root/.git -v "${HOME}"/.gitconfig:/root/.gitconfig -w "${PWD}" localhost:5000/node sh -c "export PATH=\$PATH:/usr/npm_global/bin; ${*}"
